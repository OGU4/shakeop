# サーモンラン NEXT WAVE — ゲーム内状態遷移まとめ

> SalmonBuddy の画面認識・FSM設計のためのドメイン知識資料

---

## 1. バイト全体の流れ

```
ロビー → マッチング → バイト開始演出 → [WAVE 1 → WAVE 2 → WAVE 3] → (EXTRA WAVE) → リザルト
```

通常バイトはWAVE 1〜3の3本構成。WAVE 3クリア後、条件を満たすと EXTRA WAVE が発生する。
いずれかのWAVEで失敗した場合、即リザルト画面へ遷移する（次のWAVEには進まない）。

---

## 2. 各フェーズの詳細

### 2.1 ロビー（マッチング）

- プレイヤーがクマサン商会に入り、バイト参加を選択する
- 4人のプレイヤーが揃うまでマッチング待機
- ロビーではオカシラゲージ（0〜5の6段階）を確認できる
- シフトごとに使用ステージ・支給ブキ4種が決まっている
- マッチング完了後、バイト開始へ遷移

### 2.2 バイト開始演出

- 「バイトの時間です」テキストが表示される
- 各プレイヤーにバイト専用装備（ブキセット）が支給される
- シフトで決められたステージのスタート地点に配置される

### 2.3 WAVE（通常）

各WAVEは以下の3つのフェーズで構成される:

| フェーズ | 時間 | 内容 |
|---|---|---|
| **準備時間** | 10カウント | ブキ確認・塗り作業。潮位と特殊WAVE情報が表示される |
| **本番** | 100カウント | シャケと戦い、金イクラをノルマ分納品する |
| **休憩時間** | 短い（WAVEクリア時のみ） | クリア演出。全員がスタート地点にスーパージャンプで帰還 |

#### WAVEクリア条件

以下の**両方**を満たすこと:

1. 規定のノルマ数以上の金イクラを納品している
2. タイムアップ時点で生存しているプレイヤーがいる（または生存可能性がある）

※クリア後の休憩時間に流れ弾や水没で全滅してもセーフ

#### WAVE失敗条件

以下の**いずれか**を満たした場合:

1. ノルマ未達成のまま100カウントが0になる（時間切れ）
2. 100カウント中にプレイヤー全員がやられる（全滅）

失敗すると「Works Over!」が表示され、即リザルト画面へ遷移。

#### ノルマ

- WAVEごとに金イクラの納品ノルマが設定される
- ノルマは参加者のランク（キケン度）に応じて変動する
- 金イクラはオオモノシャケを倒すとドロップする
- 金イクラをイクラコンテナまで運んで納品する

#### WAVEの遷移

- WAVEクリア → 休憩時間 → 全員スタート地点に帰還 → 次のWAVE準備時間開始
- 休憩時間にウキワ状態（倒れた状態）のプレイヤーも自動復活する
- WAVEごとにブキがシャッフルされる（4種のブキを各WAVEで1種ずつ使用）

### 2.4 WAVE中の変動要素

#### 潮位（水位変化）

各WAVEの開始時に潮位が決定される。潮位は3種類:

| 潮位 | 発生確率 | 影響 |
|---|---|---|
| **通常** | 約60% | 標準のステージ形状 |
| **満潮** | 約20% | 水位が上昇し、ステージが狭くなる。シャケの密度が増加 |
| **干潮** | 約20% | 水位が下降し、普段は水没しているエリアが出現。コンテナから遠い場所で戦う |

潮位の見分け方:
- WAVE開始10秒前〜6秒前に画面下部に「黒い波のエフェクト（半透明）」が表示される
- 左から順に 干潮 / 通常 / 満潮 の高さで判別

#### 特殊WAVE（特殊な状況 / 夜）

各WAVEで25%の確率で特殊WAVEが発生する（75%は通常WAVE）。
特殊WAVEの前兆は**空（背景）が暗くなること**。

特殊WAVEは全8種類で、各3.125%（1/32）の確率:

| 特殊WAVE | 発生可能な潮位 | 概要 |
|---|---|---|
| **ラッシュ（ヒカリバエ）** | 通常・満潮 | 1人のプレイヤーにヒカリバエが付き、大量のシャケが押し寄せる |
| **グリル発進** | 通常・満潮 | グリルが標的プレイヤーを追跡。弱点の尻尾を攻撃して倒す |
| **霧** | 通常・満潮・干潮 | 視界不良。全方位からシャケが出現。キンシャケが出る |
| **ドスコイ大量発生** | 干潮のみ | 干上がった土地にドスコイが大量出現。砲台で迎撃 |
| **巨大タツマキ** | 干潮のみ | 巨大竜巻が発生。宝箱の金イクラを運搬（金イクラ1個=2個分） |
| **カンケツセン（キンシャケ探し）** | 通常・満潮・干潮 | 間欠泉の中からキンシャケを探し出す |
| **ハコビヤ襲来** | 通常・満潮・干潮 | ハコビヤ（母艦）がシャケコプターで金イクラを奪いに来る |
| **ドロシャケ噴出** | 通常・満潮 | 地面からドロシャケが噴出。金のドロシャケを倒すと金イクラ |

特殊WAVEの決定順序:
1. 昼/夜の抽選（75%昼 / 25%夜）
2. 夜の場合、イベント種類の抽選（8種から等確率）
3. 潮位の抽選（通常60% / 満潮20% / 干潮20%）
   - イベントに対応しない潮位が出た場合、そのまま発生しない潮位として扱われる

※同じ特殊WAVEかつ同じ潮位の組み合わせは連続では発生しない

### 2.5 WAVE 3 クリア後の分岐

```
WAVE 3 クリア
    │
    ├── EXTRA WAVE 発生 → EXTRA WAVE へ
    │   （クリアファンファーレの音が通常と異なる）
    │   （左下の「セーブ完了」テキストが表示されない）
    │
    └── EXTRA WAVE 未発生 → リザルト画面へ
        （通常のクリアファンファーレ）
        （左下に「セーブ完了」テキスト表示）
```

### 2.6 EXTRA WAVE

WAVE 3クリア後に確率で発生する第4のWAVE。オカシラシャケの討伐がノルマ。

#### 発生条件

- WAVE 3をクリアしていること（必須）
- メンバー4人のオカシラゲージ合計値に応じた確率で発生

| 4人の合計ゲージ | 発生確率 |
|---|---|
| 0〜4 | 0% |
| 5〜8 | 10% |
| 9〜12 | 30% |
| 13〜16 | 60% |
| 17〜20（全員MAX） | 100% |

※オカシラゲージはバイトの成否にかかわらず1段階ずつ上昇する（0〜5の6段階）
※EXTRA WAVE発生後は参加者全員のゲージが0にリセット

#### EXTRA WAVEの仕様

| 項目 | 内容 |
|---|---|
| 制限時間 | 100カウント |
| 準備時間 | **なし**（WAVE 3終了後すぐ開始） |
| 潮位 | WAVE 3の潮位を引き継ぐ |
| ブキ | WAVE 1〜3で未使用の4種目に交換 |
| スペシャル | 残り個数にかかわらず1つにリセット |
| イクラ投げ | イクラキャノンに置換（インク消費なし、直撃800ダメージ） |
| クリア条件 | オカシラシャケを撃破 |
| 失敗条件 | 時間切れ or 全滅 |

#### EXTRA WAVE の成否とバイト結果

- EXTRA WAVEに失敗しても、WAVE 3まではクリア済みなので**バイト自体はクリア扱い**
- 評価ポイントは通常通り+20上昇
- 成功・失敗にかかわらずウロコが入手できる（削ったHP量に応じて枚数が変動）

#### オカシラシャケの種類

| 名称 | 特徴 |
|---|---|
| **ヨコヅナ** | 巨体で突進・ジャンプ攻撃。動きは遅い |
| **タツ** | 空中に浮遊。弱点を削ると自爆ダメージ |
| **ジョー** | 地中から噛みつき攻撃。弱点は噛みつき後に露出 |
| **オカシラ連合** | ヨコヅナ・タツ・ジョーの3体同時出現（クマブキ支給、スペシャル2個） |

※シフトごとに出現するオカシラシャケの種類が決まっている
※オカシラゲージの形状から出現するオカシラの種類が判別可能（Ver.6.0.0以降）

### 2.7 リザルト

バイト終了後のリザルト画面で以下が表示される:

- クリアした場合: 各種ポイント加算、クマサンポイント
- 失敗した場合: クリアしたWAVE数に応じてポイント増減
- EXTRA WAVE到達時: ウロコ獲得（金・銀・銅）

評価ポイント:
- WAVE 3クリア: +20
- WAVE 2で失敗: 減少
- WAVE 1で失敗: さらに減少

---

## 3. 状態遷移図（FSM設計用）

```
LOBBY (マッチング待機)
  │
  │ 4人揃う / マッチング完了
  ▼
MATCH_INTRO (バイト開始演出)
  │ 「バイトの時間です」表示
  ▼
WAVE_INTRO (WAVE 準備時間: 10カウント)  ◄─────────────────────┐
  │ ・潮位表示（画面下部の波エフェクト）                     │
  │ ・特殊WAVE判定（空が暗くなるか）                         │
  │ ・ブキ交換表示                                           │
  ▼                                                          │
WAVE_ACTIVE (WAVE 本番: 100カウント)                          │
  │ ・金イクラ納品                                           │
  │ ・オオモノシャケ出現                                     │
  │ ・残り時間カウントダウン                                 │
  │                                                          │
  ├── ノルマ達成 & タイムアップ時生存者あり                   │
  │   ▼                                                      │
  │  WAVE_CLEAR (WAVEクリア演出 + 休憩時間)                  │
  │   │                                                      │
  │   ├── WAVE 1 or 2 → 次のWAVE_INTRO へ ──────────────────┘
  │   │
  │   └── WAVE 3 → EXTRA WAVE 判定
  │        │
  │        ├── EXTRA WAVE 発生
  │        │   ▼
  │        │  EXTRA_WAVE_ACTIVE (100カウント)
  │        │   │ ・オカシラシャケ討伐
  │        │   ├── 討伐成功 → EXTRA_CLEAR → RESULT
  │        │   └── 時間切れ or 全滅 → EXTRA_FAIL → RESULT
  │        │
  │        └── EXTRA WAVE 未発生 → RESULT (クリア)
  │
  ├── ノルマ未達成 & タイムアップ
  │   ▼
  │  WAVE_FAIL → RESULT (失敗)
  │
  └── 全滅 (100カウント中に全員やられる)
      ▼
     WAVE_FAIL → RESULT (失敗)

RESULT (リザルト画面)
  │ ・ポイント計算
  │ ・ウロコ獲得（EXTRA WAVE時）
  ▼
LOBBY (次のバイトへ / 終了)
```

---

## 4. 画面上の表示要素（認識対象）

### 4.1 WAVE中に表示される情報

| 表示要素 | 位置（概要） | 内容 |
|---|---|---|
| WAVE番号 | 画面左上付近 | 「WAVE 1」「WAVE 2」「WAVE 3」 |
| 金イクラ現在数/ノルマ | 画面上部中央 | 例: 「14/18」 |
| 残り時間 | 画面上部 | カウントダウン（100→0） |
| 潮位テキスト | WAVE開始演出時 | 「満潮」「干潮」（通常時は表示なし） |
| 特殊WAVEテキスト | WAVE開始演出時 | 「ラッシュ」「グリル発進」等 |

### 4.2 状態遷移の画面上の手がかり

| 遷移 | 画面上の手がかり |
|---|---|
| バイト開始 | 「バイトの時間です」テキスト |
| WAVE準備開始 | 画面下部に波エフェクト表示（潮位判定用） |
| 特殊WAVE発生 | 空が暗くなる |
| WAVEクリア | 「CLEAR!!」テキスト |
| WAVE失敗 | 全滅演出 or タイムアップ失敗演出 |
| EXTRA WAVE発生 | クリアファンファーレが異なる / 「セーブ完了」非表示 / 「EXTRA WAVE」テキスト |
| ゲームクリア | リザルト画面への遷移（クリア演出） |
| ゲームオーバー | 「Works Over!」テキスト → リザルト画面 |

---

## 5. バイトチームコンテスト（特殊ルール）

不定期開催のイベント。通常バイトとの主な違い:

- WAVEが **1〜5の5本構成**（通常は1〜3）
- WAVE 1のキケン度60%スタート
- ノルマの1.5倍納品でキケン度+30%、2倍で+60%
- EXTRA WAVEなし
- 金イクラの合計納品数で順位を競う

---

## 6. ビッグラン（特殊ルール）

不定期開催のイベント。街のステージにシャケが侵攻してくる特別なバイト。
基本ルールはサーモンランと同じだが、ステージが異なる。潮位の確率が変わることがある。

---

## 補足: 参考にした情報源

- スプラトゥーン3 攻略&検証 Wiki（wikiwiki.jp）
- まかろんのゲームメモ（各種発生確率の検証データ）
- しおしおブログ（特殊WAVE・EXTRA WAVE攻略）
- pixiv百科事典（オカシラシャケ詳細）
- 各種攻略サイト（神ゲー攻略、ゲームエイト、Altema、AppMedia等）
